"use strict";(self["webpackChunkShmily"]=self["webpackChunkShmily"]||[]).push([[4509],{34509:function(t,s,e){e.r(s),e.d(s,{default:function(){return d}});var r=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"devFlag"},[e("ShowField",{attrs:{msg:t.msg,field:"same"}}),e("ShowField",{attrs:{msg:t.msg,field:"warn"}}),"QQ"===t.msg.source&&""===t.msg.content.trim()?e("el-tag",[t._v("没有内容")]):t._e(),t.msgIsSame?e("el-tag",{attrs:{type:"danger"}},[t._v("↑ msgIsSame ↑")]):t._e(),t.msSameColor?e("div",{staticClass:"line",style:{background:t.msSameColor},attrs:{title:"前后的消息时间一致"}}):t._e(),"QQ"===t.msg.source&&/\[(?!(自动回复|Android|iPhone|IP地址)).+\]/.test(t.msg.html)?e("el-tag",[t._v(" 好像这是一条表情 ")]):t._e()],1)},i=[],n=(e(3048),e(92196)),m=e.n(n);class l{constructor(){this.colorArr=["#5cdbd3","#b37feb","#fff566","#69c0ff","#95de64","#ffc069","#d3f261","#85a5ff","#ffd666","#ff85c0"],this.tmp="",this.index=0}get(t){return t!==this.tmp&&(this.tmp=t,this.index+=1,this.index>=this.colorArr.length&&(this.index=0)),this.colorArr[this.index]}}const a=new l;var o={props:{msg:Object,msgPart:Array,msgPartIndex:Number,listIndex:Number},data:()=>({}),computed:{msgAll(){return this.$store.state.msgAll},previousMsg(){return this.msgPart[this.msgPartIndex-1]||{}},nextMsg(){return this.msgPart[this.msgPartIndex+1]||{}},msgIsSame(){return this.msgSameHandle(this.msg,this.previousMsg)},msSameColor(){return this.msg.ms===this.previousMsg.ms||this.msg.ms===this.nextMsg.ms?a.get(this.msg.ms):""}},methods:{msgSameHandle(t,s){return t.ms===s.ms&&t.html===s.html&&t.source==s.source},async goMsg(t){const s=this.goWechatLost;let e;if("pre"===t){const t=this.msgAll.slice(0,this.listIndex);e=t.findLast((t=>s(t)))}else{const t=this.msgAll.slice(this.listIndex+1);e=t.find((t=>s(t)))}e?await this.$store.dispatch("query/search/sendSearch",{search:{},id:e.id}):this.$message.error("没有找到相关信息")},goWechatLost(t){if("Wechat"!==t.source)return!1;const s=t.$Wechat.data;switch(t.type){case"自定义表情":return!s.$url_emoji;default:return!1}},goNumberMsg(t){return!(!t.sender||!t.receiver)&&["13574228815","13973335059","13908437618","18908439510"].some((s=>t.sender.includes(s)||t.receiver.includes(s)))},goEmptyMsg(t){return""===t.html},goWechatVideo(t){return"Wechat"===t.source&&"视频"===t.type&&t.$Wechat.data.$mp4info.mp4Url},goQQImgProblemMsg(t){return"QQ"===t.source&&(t.html.includes("lostImg")&&!t.html.includes("魔法表情")&&!t.html.includes("超级表情")||/\[(?!自动回复|Android|iPhone|IP地址).+\]/.test(t.html))&&!t.content.startsWith("[图] {{诺 小魚、")&&!t.content.startsWith("[图] {{诺 小魚、")&&!t.content.startsWith("[图]{{诺 小魚、")}},components:{ShowField:{props:{msg:Object,field:null},render(t){const{msg:s,field:e}=this.$props,r=m().get(s,`_$Dev.${e}`)??m().get(s,e);return r?t("el-tag",[`${e} - ${r}`]):null}}}},h=o,c=e(1001),g=(0,c.Z)(h,r,i,!1,null,"17da4acb",null),d=g.exports}}]);