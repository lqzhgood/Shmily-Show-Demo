"use strict";(self["webpackChunkShmily"]=self["webpackChunkShmily"]||[]).push([[5388],{95388:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"dialogFace",attrs:{"close-on-click-modal":!1,modal:!1,visible:e.faceDialog,"destroy-on-close":"",fullscreen:"",title:"仅限新增表情,[Alias表情]请手动修改 _faceArr.json 并执行 merger.js"},on:{"update:visible":function(t){e.faceDialog=t}}},[a("div",{staticClass:"dialog_body"},[a("el-card",{staticClass:"currFace"},[e._t("default")],2),a("div",{staticClass:"faceWrap"},e._l(e.faceArrTypes,(function(t){return a("el-card",{key:t.type,staticClass:"faceType",attrs:{"body-style":{padding:0},shadow:"hover"}},[e._l(t.faces,(function(t){return a("el-image",{key:t.md5,staticClass:"face",attrs:{"preview-src-list":[e.makeFaceUrl(t)],src:e.makeFaceUrl(t),lazy:""}})})),a("div",{staticClass:"des"},[a("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(a){return e.selectFaceType(t.type)}}},[e._v("选择")]),a("span",{staticClass:"type",on:{click:function(a){return e.openFaceFolder(t.type)}}},[a("el-link",[e._v(e._s(t.type))])],1)],1)],2)})),1)],1)])},c=[],l=a(53943),r={name:"Dialog-Face",async mounted(){const{result:{baseUrl:e,faceArr:t}}=await l.Z.get("/msg/modify/file/face/faceArr",{params:{source:this.source,type:this.type}});this.baseUrl=e,this.faceArrTypes=t.reduce(((e,t)=>{let a=e.find((e=>e.type===t.type));return a||(a={type:t.type,faces:[]},e.push(a)),a.faces.length<this.typeMaxFace&&a.faces.push(t),e}),[])},props:{source:String,type:String,show:Boolean},data:()=>({typeMaxFace:2,baseUrl:"",upFacePreSrc:"",faceArrTypes:[]}),watch:{faceDialog(e){console.log("v",e)}},computed:{faceDialog:{get(){return this.show},set(e){this.$emit("update:show",e)}}},methods:{selectFaceType(e){this.$emit("selectFaceType",e),this.faceDialog=!1},makeFaceUrl(e){return`${this.baseUrl}/${e.type}/${e.files[0].md5}${e.files[0].ext}`},openFaceFolder(e){l.Z.get("/msg/modify/file/face/openFolder",{params:{source:this.source,type:this.type,faceType:e}})}}},i=r,o=a(1001),n=(0,o.Z)(i,s,c,!1,null,"858be73e",null),p=n.exports}}]);