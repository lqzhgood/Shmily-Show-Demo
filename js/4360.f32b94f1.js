(self["webpackChunkShmily"]=self["webpackChunkShmily"]||[]).push([[4360,9690],{44935:function(t,a,i){"use strict";i.d(a,{Z:function(){return p}});var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("CardWrap",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[i("div",{staticClass:"wrap"},[i("div",{staticClass:"total"},[i("div",{staticClass:"title"},[t._t("title",(function(){return[i("b",[t._v(t._s(t.title||t.sourceType))])]}))],2),t.sourceData?i("div",{staticClass:"content"},[i("DirectionTip",{attrs:{unit:t.unit,direction:t.sourceData.direction,placement:"right"}},[i("span",[t._v(" "+t._s(t.sourceData.count)+" "),i("span",{staticClass:"unit"},[t._v(t._s(t.unit))])])])],1):t._e(),t.activityDayData?i("div",{staticClass:"specialDay"},[i("span",{staticClass:"label"},[t._v("活跃时间")]),i("DirectionTip",{attrs:{unit:t.unit,direction:t.activityDayData.activityDayDirection,placement:"right"}},[i("span",{staticClass:"value"},[t._v(t._s(t.activityDayData.activityDay))])]),i("span",{staticClass:"unit"},[t._v("天")]),i("el-divider",{staticClass:"hr",attrs:{direction:"vertical"}}),i("DirectionTip",{attrs:{direction:null,placement:"right"},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" 总计 "+t._s(t.activityDayData.allDay)+" 天 | 占比 "+t._s(t.activityDayData.activityDayP)+"% ")]},proxy:!0}],null,!1,137808767)},[i("span",[t._v(t._s(t.activityDayData.activityDayP)+"%")])])],1):t._e(),t.avgData?i("div",{staticClass:"specialDay"},[i("span",{staticClass:"label"},[t._v("平均每天")]),i("DirectionTip",{attrs:{unit:t.unit,direction:t.avgData.avgDirection,placement:"right"}},[i("span",{staticClass:"value"},[t._v(t._s(t.avgData.avg))])]),i("span",{staticClass:"unit"},[t._v(t._s(t.unit))])],1):t._e(),t.maxData?i("div",{staticClass:"specialDay"},[i("span",{staticClass:"label"},[t._v("最多当天")]),i("span",{staticClass:"value"},[t._v(t._s(t.maxData.max))]),i("span",{staticClass:"unit"},[t._v(t._s(t.unit))]),i("el-divider",{staticClass:"hr",attrs:{direction:"vertical"}}),t._l(t.maxData.maxDay,(function(a){return i("span",{key:a.date,staticClass:"maxDay"},[i("DirectionTip",{attrs:{unit:t.unit,direction:a.direction,placement:"right"}},[i("span",[t._v(t._s(a.date))])])],1)}))],2):t._e()]),t.sourceData?i("div",{staticClass:"types"},t._l(t.sourceData.children,(function(a){return i("div",{key:a.label,staticClass:"type"},[a.icon?i("img",{staticClass:"icon",attrs:{src:a.icon}}):t._e(),i("span",{staticClass:"label"},[t._v(t._s(a.label))]),i("DirectionTip",{staticClass:"count",attrs:{unit:t.unit,direction:a.direction}},[i("span",[t._v(t._s(a.count))])])],1)})),0):t._e()])])},s=[],n=i(69690),c=i(8206),l=i(72217),r=i(63866),o={name:"Statistic-Components-Plot-SourceCount",mixins:[c.Z],data:()=>({maxData:null,sourceData:null,avgData:null,activityDayData:null}),computed:{defaultUrl(){return`/statistic/${this.sourceType}/${this.directionType}/sourceCount.json`}},methods:{async updatePlot(){await this.toggleLoading(!0);const t=this.url||this.defaultUrl,a=await r.Z.get(t),{sourceData:i,maxData:e,avgData:s,activityDayData:n}=(0,l.deepFreeze)(a);this.sourceData=i,this.maxData=e,this.avgData=s,this.activityDayData=n,await this.toggleLoading(!1)}},components:{DirectionTip:n["default"]}},_=o,u=i(1001),d=(0,u.Z)(_,e,s,!1,null,"441b745c",null),p=d.exports},94360:function(t,a,i){"use strict";i.r(a),i.d(a,{default:function(){return u}});var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("DirectionWrap",{attrs:{btnsStyle:t.btnsStyle},scopedSlots:t._u([{key:"default",fn:function(a){var e=a.directionType;return[i("Plot",t._b({staticStyle:{"padding-top":"20px"},attrs:{directionType:e}},"Plot",t.$attrs,!1))]}}])})},s=[],n=i(4769),c=i(44935),l={name:"Statistic-Page-COMMON-Components-SourceCount-Wrap",mixins:[n.Z],data:()=>({btnsStyle:{}}),components:{Plot:c.Z}},r=l,o=i(1001),_=(0,o.Z)(r,e,s,!1,null,"28768067",null),u=_.exports},17034:function(t,a,i){"use strict";i.d(a,{Z:function(){return u}});var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"directionWrap"},[i("div",{staticClass:"actions"},[i("div",{staticClass:"btnWrap",style:t.btnsStyleFinally},[i("el-radio-group",{staticClass:"directionSelect",model:{value:t.select,callback:function(a){t.select=a},expression:"select"}},[i("el-radio-button",{class:{unActive:t.select!==t.DIRECTION_TYPE_ALL},attrs:{label:t.DIRECTION_TYPE_ALL,title:"全部聊天数据"}},[i("img",{staticClass:"icon",attrs:{src:t.DEFAULT_AVATAR_COME}}),i("img",{staticClass:"icon",attrs:{src:t.DEFAULT_AVATAR_GO}})]),i("el-radio-button",{class:{unActive:t.select!==t.DIRECTION_TYPE_COME},attrs:{label:t.DIRECTION_TYPE_COME}},[i("img",{staticClass:"icon",attrs:{src:t.DEFAULT_AVATAR_COME,title:"聊天窗左边 Come"}})]),i("el-radio-button",{class:{unActive:t.select!==t.DIRECTION_TYPE_GO},attrs:{label:t.DIRECTION_TYPE_GO}},[i("img",{staticClass:"icon",attrs:{src:t.DEFAULT_AVATAR_GO,title:"聊天窗右边 Go"}})])],1)],1)]),t._t("default",null,{directionType:t.select})],2)},s=[],n=i(45889),c=i(46755),l={name:"Statistic-Components-DirectionWrap",mixins:[c.Z],data:()=>({DEFAULT_AVATAR_GO:n.DEFAULT_AVATAR_GO,DEFAULT_AVATAR_COME:n.DEFAULT_AVATAR_COME,DIRECTION_TYPE_ALL:n.DIRECTION_TYPE_ALL,DIRECTION_TYPE_COME:n.DIRECTION_TYPE_COME,DIRECTION_TYPE_GO:n.DIRECTION_TYPE_GO,select:n.DIRECTION_TYPE_ALL})},r=l,o=i(1001),_=(0,o.Z)(r,e,s,!1,null,"4caf9997",null),u=_.exports},69690:function(t,a,i){"use strict";i.r(a),i.d(a,{default:function(){return _}});var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return t.$slots.title||t.direction?i("el-tooltip",t._b({attrs:{effect:t.effect}},"el-tooltip",t.$attrs,!1),[i("div",{attrs:{slot:"content"},slot:"content"},[t.$slots.title?i("div",{staticClass:"title"},[t._t("title")],2):t._e(),i("hr",{staticClass:"hr"}),t.direction?i("div",{staticClass:"content"},[i("div",{staticClass:"row",staticStyle:{"margin-bottom":"5px"}},[i("img",{staticClass:"img",attrs:{src:t.DEFAULT_AVATAR_COME}}),i("div",{staticClass:"value"},[i("span",[t._v(t._s(t.direction.come)+" "+t._s(t.unit))]),i("span",{staticClass:"divider"},[t._v("/")]),i("span",{staticClass:"percent"},[t._v(" "+t._s(t.direction.comeP)+" "),i("small",[t._v("%")])])])]),i("div",{staticClass:"row"},[i("img",{staticClass:"img",attrs:{src:t.DEFAULT_AVATAR_GO}}),i("div",{staticClass:"value"},[i("span",[t._v(t._s(t.direction.go)+" "+t._s(t.unit))]),i("span",{staticClass:"divider"},[t._v("/")]),i("span",{staticClass:"percent"},[t._v(" "+t._s(t.direction.goP)+" "),i("small",[t._v("%")])])])])]):t._e()]),t._t("default")],2):i("div",[t._t("default")],2)},s=[],n=i(95460),c={name:"Statistic-Components-Plot-Tips-directionTip",mixins:[n.Z],props:{direction:{type:Object,require:!0}},data:()=>({})},l=c,r=i(1001),o=(0,r.Z)(l,e,s,!1,null,"d2813294",null),_=o.exports},63866:function(t,a,i){"use strict";var e=i(26166),s=i.n(e),n=i(74549);const c=s().create({baseURL:"./json/",timeout:36e5});c.interceptors.response.use((t=>t.data),(t=>{const{config:a}=t.response;return n.MessageBox.alert(`无法获取数据 <br /> 请尝试访问 <a href="./json/${a.url}" target="_blank">./json/${a.url}</a>  是否有数据`,"错误",{type:"error",confirmButtonText:"刷新",dangerouslyUseHTMLString:!0}),Promise.reject(t)})),a["Z"]=c},4769:function(t,a,i){"use strict";var e=i(17034);a["Z"]={components:{DirectionWrap:e.Z}}},8206:function(t,a,i){"use strict";var e=i(45889);a["Z"]={props:{title:{type:String,default:""},unit:{type:String,default:"条"},url:[String,Object],sourceType:{type:String},directionType:{type:String,default:e.DIRECTION_TYPE_ALL},plotOptions:{type:Object,default:()=>({plot:{},extra:{}})}},data:()=>({DEFAULT_AVATAR_COME:e.DEFAULT_AVATAR_COME,DEFAULT_AVATAR_GO:e.DEFAULT_AVATAR_GO,$plot:null,loading:!0}),computed:{needUpdate(){return{sourceType:this.sourceType,directionType:this.directionType,url:this.url}}},watch:{needUpdate:{immediate:!0,deep:!0,async handler(){await this.updatePlot()}}},methods:{async toggleLoading(t){t?(this.loading=t,await this.$nextTick()):(await this.$nextTick(),this.loading=t)}},beforeDestroy(){this.$plot&&this.$plot.destroy()}}},46755:function(t,a){"use strict";a["Z"]={created(){this.defaultSelect&&(this.select=this.defaultSelect)},props:{defaultSelect:{type:String,default:""},btnsStyle:{type:Object,default:()=>({})},center:Boolean,inner:Boolean},computed:{btnsStyleFinally(){const t=this.center?{top:"7px",left:"50%",transform:"translateX(-50%)"}:{},a=this.inner?{top:"5px",left:"7px"}:{};return Object.assign({},t,a,this.btnsStyle)}}}},95460:function(t,a,i){"use strict";var e=i(45889);a["Z"]={data:()=>({DEFAULT_AVATAR_COME:e.DEFAULT_AVATAR_COME,DEFAULT_AVATAR_GO:e.DEFAULT_AVATAR_GO}),props:{unit:String,effect:{type:String,default:"light"}}}},45889:function(t,a){a.KEY_ALL="全部",a.SOURCE_TYPE_TOTAL="Total",a.SOURCE_TYPE_EDIT="Edit",a.SOURCE_TYPE_CONTRAST="Contrast",a.DEFAULT_AVATAR_COME="/static/avatar/default/come.png",a.DEFAULT_AVATAR_GO="/static/avatar/default/go.png",a.DIRECTION_TYPE_ALL="all",a.DIRECTION_TYPE_COME="come",a.DIRECTION_TYPE_GO="go",a.COUNT_DB_TYPE_NUM="number",a.COUNT_DB_TYPE_WORDS="words",a.EMOTIONS_DB_TYPE_PACK_NAME="packName",a.EMOTIONS_DB_TYPE_DES="des",a.HEATMAP_DB_TYPE_YEAR="year",a.HEATMAP_DB_TYPE_WEEK="week",a.HEATMAP_DB_TYPE_DAY="day"}}]);