"use strict";(self["webpackChunkShmily"]=self["webpackChunkShmily"]||[]).push([[5171],{5171:function(t,e,s){s.r(e),s.d(e,{default:function(){return o}});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("MsgWrap",{staticClass:"source-Email"},[s("div",{staticClass:"content",domProps:{innerHTML:t._s(t.msg.html)}}),0!==t.attachments.length?s("el-divider",{staticClass:"hr"},[s("i",{staticClass:"el-icon-paperclip"})]):t._e(),t.attachments&&t.attachments.length>0?s("div",{staticClass:"attachments"},t._l(t.attachments,(function(e,a){return s("div",{key:a,staticClass:"attachment",class:{isPic:t.isPic(e.ext),RealFileNotExist:!t.attachmentsIsRealFileExist[a]}},[s("div",{staticClass:"left"},[t.isPic(e.ext)?s("img",{attrs:{src:e.url}}):s("img",{staticClass:"icon",attrs:{src:t.iconMap(e.ext)}})]),s("div",{staticClass:"right"},[s("div",{staticClass:"name"},[t._v(" "+t._s(e.name)+" "),s("span",{staticClass:"size"},[t._v("( "+t._s(e.size)+" )")])]),s("div",{staticClass:"action"},[s("a",{attrs:{href:e.url,download:"",target:"_blank"}},[t._v("下载")]),t.isPic(e.ext)?s("a",{on:{click:function(s){return t.previewImg(e.url)}}},[t._v("预览")]):t._e(),".swf"==e.ext.toLowerCase()?s("a",{attrs:{download:"",href:"./tools/flashplayer_sa.exe",target:"_blank"}},[t._v("下载Flash播放器")]):t._e()])])])})),0):t._e()],1)},i=[],n=s(95787),c=s(38948),r={name:"Source-Email",props:{msg:Object},async mounted(){for(let t=0;t<this.attachments.length;t++){const e=await(0,c.O)(this.attachments[t].url);this.$set(this.attachmentsIsRealFileExist,t,e)}},data:()=>({attachmentsIsRealFileExist:[]}),computed:{attachments(){return this.msg.$Email.attachments}},methods:{iconMap(t){const e="/static/msg/source/Email/icon";switch(t.toLowerCase()){case".mp4":case".m4a":return`${e}/video.png`;case".rar":case".zip":case".7z":return`${e}/zip.png`;case".sis":case".sisx":return`${e}/sisx.png`;case".mht":case".html":return`${e}/ie.png`;default:return`${e}/attachment.gif`}},isPic(t){return n.fQ.includes(t.toLowerCase())},previewImg(t){const e=this.attachments.filter((t=>this.isPic(t.ext))).map((t=>t.url));this.$hevueImgPreview({multiple:!0,nowImgIndex:e.findIndex((e=>e==t)),imgList:e})},openPre(t){this.$hevueImgPreview(t)}}},l=r,m=s(1001),h=(0,m.Z)(l,a,i,!1,null,"47de2e84",null),o=h.exports},38948:function(t,e,s){s.d(e,{O:function(){return l}});var a=s(26166),i=s.n(a),n=s(92196),c=s.n(n),r=s(95787);function l(t){return new Promise(((e,s)=>{i().get(t,{headers:{Range:"bytes=0-0"},timeout:1e3}).then((t=>{e(!0)})).catch((t=>{e(!1),404!=c().get(t,"request.status")&&404!=c().get(t,"response.status")&&r.q7.danger("附件文件探测出错",t.message)}))}))}}}]);