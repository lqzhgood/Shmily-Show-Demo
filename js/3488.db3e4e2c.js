"use strict";(self["webpackChunkShmily"]=self["webpackChunkShmily"]||[]).push([[3488],{3488:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("CountWrap",{scopedSlots:t._u([{key:"default",fn:function(e){var s=e.countType;return[a("YearCount",{attrs:{sourceType:t.sourceType,url:t.makeUrl(s),unit:t.data[s].unit,title:t.data[s].title}})]}}])})},i=[],n=a(1526),l=a(45889),r=a(460),o={name:"Statistic-Components-Edit-Section-YearCountComment-wrap",data:()=>({sourceType:l.SOURCE_TYPE_EDIT}),computed:{data(){return{[l.COUNT_DB_TYPE_NUM]:{title:"评论条数"},[l.COUNT_DB_TYPE_WORDS]:{title:"评论字数",unit:"字"}}}},methods:{makeUrl(t){return`/statistic/${this.sourceType}/${t}/comment-year-count.json`}},components:{CountWrap:n.Z,YearCount:r.Z}},c=o,u=a(1001),p=(0,u.Z)(c,s,i,!1,null,"6c549724",null),d=p.exports},460:function(t,e,a){a.d(e,{Z:function(){return d}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("CardWrap",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("div",{staticClass:"YearCountWrap"},[a("el-scrollbar",{staticClass:"scrollbar"},[a("div",{staticClass:"year-count"},t._l(t.list,(function(e){return a("div",{key:e.year,staticClass:"box"},[a("div",{staticClass:"title"},[t._v(t._s(e.year))]),a("div",{staticClass:"content"},[a("div",{staticClass:"max"},[a("MaxTip",{attrs:{yearData:e,unit:t.unit,placement:"top"},scopedSlots:t._u([{key:"title",fn:function(){return[a("span",[t._v(t._s(e.year)+" 年当日最多 "+t._s(e.max)+" "+t._s(t.unit))])]},proxy:!0}],null,!0)},[a("span",{staticClass:"count"},[a("span",{class:e.maxDirection},[t._v(t._s(e.max))])])]),a("span",{staticClass:"divider"},[t._v("/")]),a("DirectionTip",{attrs:{direction:e.direction,placement:"top",unit:"条"},scopedSlots:t._u([{key:"title",fn:function(){return[a("span",[t._v(t._s(e.year)+" 年总计 "+t._s(e.total)+" "+t._s(t.unit))])]},proxy:!0}],null,!0)},[a("span",[t._v(t._s(e.total)+" "+t._s(t.unit))])])],1),a("div",{staticClass:"active"},[a("DirectionTip",{attrs:{direction:e.avgDirection,placement:"bottom",unit:"条"},scopedSlots:t._u([{key:"title",fn:function(){return[a("span",[t._v(t._s(e.year)+" 年平均 "+t._s(e.avg)+" "+t._s(t.unit))])]},proxy:!0}],null,!0)},[a("span",[t._v(t._s(e.avg)+" "+t._s(t.unit))])]),a("span",{staticClass:"divider"},[t._v("/")]),a("DirectionTip",{attrs:{direction:e.activityDayDirection,placement:"bottom",unit:"天"},scopedSlots:t._u([{key:"title",fn:function(){return[a("div",{staticClass:"row"},[a("div",{staticClass:"label"},[t._v("总计")]),a("div",{staticClass:"value"},[t._v(t._s(e.allDay)+" 天")])]),a("div",{staticClass:"row"},[a("div",{staticClass:"label"},[t._v("活跃")]),a("div",{staticClass:"value"},[t._v(t._s(e.activityDay)+" 天")])]),a("div",{staticClass:"row"},[a("div",{staticClass:"label"},[t._v("占比")]),a("div",{staticClass:"value"},[t._v(t._s(e.activityDayP)+"%")])])]},proxy:!0}],null,!0)},[a("span",[t._v(t._s(e.activityDay)+" 天")])])],1)])])})),0)])],1)])},i=[],n=a(72217),l=a(63866),r=a(8206),o={name:"Statistic-Components-Plot-YearCount",mixins:[r.Z],data:()=>({list:[]}),computed:{defaultUrl(){return`/statistic/${this.sourceType}/${this.directionType}/year-count.json`}},methods:{async updatePlot(){await this.toggleLoading(!0);const t=await l.Z.get(this.url||this.defaultUrl);this.list=(0,n.deepFreeze)(t),await this.toggleLoading(!1)}},components:{DirectionTip:()=>a.e(9690).then(a.bind(a,69690)),MaxTip:()=>a.e(1590).then(a.bind(a,21590))}},c=o,u=a(1001),p=(0,u.Z)(c,s,i,!1,null,"148dcd98",null),d=p.exports},1526:function(t,e,a){a.d(e,{Z:function(){return p}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"countTypeWrap"},[a("div",{staticClass:"actions"},[a("div",{staticClass:"btnWrap",style:t.btnsStyleFinally},[a("el-radio-group",{staticClass:"directionSelect",model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},[a("el-radio-button",{class:{unActive:t.select!==t.COUNT_DB_TYPE_NUM},attrs:{label:t.COUNT_DB_TYPE_NUM}},[a("span",[t._v("次数")])]),a("el-radio-button",{class:{unActive:t.select!==t.COUNT_DB_TYPE_WORDS},attrs:{label:t.COUNT_DB_TYPE_WORDS}},[a("span",[t._v("字数")])])],1)],1)]),t._t("default",null,{countType:t.select})],2)},i=[],n=a(45889),l=a(46755),r={name:"Statistic-Components-countType",mixins:[l.Z],data:()=>({COUNT_DB_TYPE_NUM:n.COUNT_DB_TYPE_NUM,COUNT_DB_TYPE_WORDS:n.COUNT_DB_TYPE_WORDS,select:n.COUNT_DB_TYPE_NUM})},o=r,c=a(1001),u=(0,c.Z)(o,s,i,!1,null,"75f5790a",null),p=u.exports},63866:function(t,e,a){var s=a(26166),i=a.n(s),n=a(74549);const l=i().create({baseURL:"./json/",timeout:36e5});l.interceptors.response.use((t=>t.data),(t=>{const{config:e}=t.response;return n.MessageBox.alert(`无法获取数据 <br /> 请尝试访问 <a href="./json/${e.url}" target="_blank">./json/${e.url}</a>  是否有数据`,"错误",{type:"error",confirmButtonText:"刷新",dangerouslyUseHTMLString:!0}),Promise.reject(t)})),e["Z"]=l},8206:function(t,e,a){var s=a(45889);e["Z"]={props:{title:{type:String,default:""},unit:{type:String,default:"条"},url:[String,Object],sourceType:{type:String},directionType:{type:String,default:s.DIRECTION_TYPE_ALL},plotOptions:{type:Object,default:()=>({plot:{},extra:{}})}},data:()=>({DEFAULT_AVATAR_COME:s.DEFAULT_AVATAR_COME,DEFAULT_AVATAR_GO:s.DEFAULT_AVATAR_GO,$plot:null,loading:!0}),computed:{needUpdate(){return{sourceType:this.sourceType,directionType:this.directionType,url:this.url}}},watch:{needUpdate:{immediate:!0,deep:!0,async handler(){await this.updatePlot()}}},methods:{async toggleLoading(t){t?(this.loading=t,await this.$nextTick()):(await this.$nextTick(),this.loading=t)}},beforeDestroy(){this.$plot&&this.$plot.destroy()}}},46755:function(t,e){e["Z"]={created(){this.defaultSelect&&(this.select=this.defaultSelect)},props:{defaultSelect:{type:String,default:""},btnsStyle:{type:Object,default:()=>({})},center:Boolean,inner:Boolean},computed:{btnsStyleFinally(){const t=this.center?{top:"7px",left:"50%",transform:"translateX(-50%)"}:{},e=this.inner?{top:"5px",left:"7px"}:{};return Object.assign({},t,e,this.btnsStyle)}}}}}]);